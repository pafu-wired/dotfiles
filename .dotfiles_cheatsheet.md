# Dotfiles Management Cheat Sheet

## Core Dotfiles Commands

### Basic Operations
```bash
# Check status of tracked files
dotfiles status

# Add new files to track
dotfiles add ~/.config/hypr/
dotfiles add ~/.bashrc
dotfiles add ~/.vimrc

# Add a single file
dotfiles add ~/.config/alacritty/alacritty.yml

# Commit changes
dotfiles commit -m "Description of changes"

# Push to GitHub
dotfiles push

# Pull latest changes (useful when syncing between machines)
dotfiles pull

# See what files you're tracking
dotfiles ls-files

# See commit history
dotfiles log --oneline

# Show differences in tracked files
dotfiles diff
```

## Managing Files

### File Operations
```bash
# Remove a file from tracking (but keep the local file)
dotfiles rm --cached ~/.config/somefile

# Completely remove a file
dotfiles rm ~/.config/somefile

# Move/rename tracked files
dotfiles mv oldfile newfile

# Restore a file to last committed version
dotfiles checkout ~/.config/hypr/hyprland.conf
```

## Useful Aliases to Add

Add these to your `~/.bashrc`:

```bash
# Basic dotfiles aliases
alias dotfiles="/usr/bin/git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME"
alias df-status="dotfiles status"
alias df-add="dotfiles add"
alias df-commit="dotfiles commit"
alias df-push="dotfiles push"
alias df-pull="dotfiles pull"
alias df-log="dotfiles log --oneline -10"

# Quick backup script
alias backup-dotfiles="dotfiles add ~/.config/hypr/ && dotfiles commit -m 'Auto backup $(date)' && dotfiles push"
```

## Restoring on New Machine

### Full Setup Process
```bash
# Clone your dotfiles to a new machine
git clone --bare https://github.com/pafu-wired/dotfiles.git $HOME/.dotfiles

# Set up the alias
alias dotfiles="/usr/bin/git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME"

# Backup any existing conflicting files
mkdir -p ~/.config-backup
dotfiles checkout 2>&1 | egrep "\s+\." | awk {'print $1'} | xargs -I{} mv {} ~/.config-backup/{}

# Checkout your dotfiles
dotfiles checkout
dotfiles config --local status.showUntrackedFiles no
```

## Troubleshooting Commands

### When Things Go Wrong
```bash
# See which remote you're using
dotfiles remote -v

# Reset if something goes wrong
dotfiles reset --hard HEAD

# Force push (be careful!)
dotfiles push --force

# See untracked files (should be empty due to our config)
dotfiles status --show-untracked-files

# Clean up (remove untracked files - be very careful!)
dotfiles clean -fd
```

## Daily Workflow

### Quick Reference
```bash
# Check what's changed
dotfiles status

# Stage changes
dotfiles add [files]

# Commit with message
dotfiles commit -m "msg"

# Backup to GitHub
dotfiles push
```

### When You Modify Configs
```bash
# Example: After editing Hyprland config
dotfiles add ~/.config/hypr/
dotfiles commit -m "Updated Hyprland keybinds"
dotfiles push
```

## Common File Paths to Track

### Hyprland Setup
```bash
# Hyprland configs
~/.config/hypr/hyprland.conf
~/.config/hypr/hypridle.conf
~/.config/hypr/hyprlock.conf
~/.config/hypr/hyprpaper.conf

# Status bar
~/.config/waybar/config
~/.config/waybar/style.css

# Terminal
~/.config/alacritty/alacritty.yml
~/.config/kitty/kitty.conf

# Application launcher
~/.config/wofi/config
~/.config/wofi/style.css

# Notifications
~/.config/dunst/dunstrc
```

### Shell and System Configs
```bash
# Shell configs
~/.bashrc
~/.zshrc
~/.profile

# Git
~/.gitconfig

# Editor
~/.vimrc
~/.config/nvim/

# Other utilities
~/.tmux.conf
~/.config/ranger/
```

## Authentication Setup

### Personal Access Token
1. Go to GitHub → Settings → Developer settings → Personal access tokens
2. Generate new token with "repo" scope
3. Use token as password when pushing

### SSH Key Setup
```bash
# Generate SSH key
ssh-keygen -t ed25519 -C "your-email@example.com"

# Add to SSH agent
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_ed25519

# Copy public key to add to GitHub
cat ~/.ssh/id_ed25519.pub

# Change remote to SSH
dotfiles remote set-url origin git@github.com:pafu-wired/dotfiles.git
```

## Pro Tips

- **Always check status first**: `dotfiles status`
- **Commit often**: Small, descriptive commits are better
- **Use meaningful commit messages**: Describe what changed and why
- **Don't track sensitive files**: Avoid passwords, API keys, etc.
- **Backup before major changes**: `dotfiles log` to see history
- **Test on fresh systems**: Make sure your restore process works

## Emergency Recovery

### If You Mess Up
```bash
# See recent commits
dotfiles log --oneline -5

# Go back to a previous commit
dotfiles reset --hard <commit-hash>

# Undo last commit but keep changes
dotfiles reset --soft HEAD~1

# Completely start over (nuclear option)
rm -rf ~/.dotfiles
# Then follow initial setup again
```

---

**Remember**: The most important commands are `dotfiles status`, `dotfiles add`, `dotfiles commit`, and `dotfiles push`!